<%- include ('partials/header') %>
<main id="content" role="main">
  <!-- Breadcrumb Section -->
  <div class="bg-primary">
    <div class="container space-top-1 pb-3">
      <div class="row">
        <div class="col-lg-5 order-lg-2 text-lg-right mb-4 mb-lg-0">
          <div
            class="d-flex d-lg-inline-block justify-content-between justify-content-lg-end align-items-center align-items-lg-start">
            <!-- Breadcrumb -->
            <ol class="breadcrumb breadcrumb-white breadcrumb-no-gutter mb-0">
              <li class="breadcrumb-item">
                <a class="breadcrumb-link" href="/">Home</a>
              </li>
              <li class="breadcrumb-item">
                <a class="breadcrumb-link" href="/admin/dashboard">Dashboard</a>
              </li>
              <li class="breadcrumb-item active" aria-current="page">
                Posts
              </li>
            </ol>
            <!-- End Breadcrumb -->

            <!-- Breadcrumb Nav Toggle Button -->
            <div class="d-lg-none">
              <button type="button" class="navbar-toggler btn u-hamburger u-hamburger--white"
                aria-label="Toggle navigation" aria-expanded="false" aria-controls="breadcrumbNavBar"
                data-toggle="collapse" data-target="#breadcrumbNavBar">
                <span id="breadcrumbHamburgerTrigger" class="u-hamburger__box">
                  <span class="u-hamburger__inner"></span>
                </span>
              </button>
            </div>
            <!-- End Breadcrumb Nav Toggle Button -->
          </div>
        </div>

        <div class="col-lg-7 order-lg-1">
          <!-- User Info -->
          <div class="media d-block d-sm-flex align-items-sm-center">
            <div class="u-lg-avatar position-relative mb-3 mb-sm-0 mr-3">
              <img class="img-fluid rounded-circle" src="<%= user.pic %>" alt="Image Description" />
              <span class="badge badge-md badge-outline-success badge-pos badge-pos--bottom-right rounded-circle">
                <span class="fas fa-check"></span>
              </span>
            </div>
            <div class="media-body">
              <h1 class="h3 text-white font-weight-medium mb-1">
                <%= user.name %>
              </h1>
              <span class="d-block text-white-70"><i class="fas fa-at" style="margin-right:0.3em;"></i><%=
                user.email %></span>
              <span class="d-block text-white-70"><i class="fas fa-code-branch"
                  style="margin-right:0.3em;"></i><%= user._id %></span>
            </div>
          </div>
          <!-- End User Info -->
        </div>
      </div>
    </div>

    <div class="container space-bottom-1 space-bottom-lg-0">
      <div class="d-lg-flex justify-content-lg-between align-items-lg-center">
        <!-- Navbar -->

        <!-- End Navbar -->


        <div class="ml-lg-auto pb-4">
          <!-- Button -->
          <a class="btn btn-sm btn-white text-nowrap transition-3d-hover" href="/admin/posts/new"
            data-modal-target="#requestPaymentModal">
            <i class="fas fa-paragraph" style="margin-right:0.4em;"></i>Scrivi un Post
          </a>
          <!-- End Button -->
        </div>
      </div>
    </div>
  </div>
  <!-- End Breadcrumb Section -->
  <div class="bg-light">
    <div class="container space-2">

      <%- messages('message', locals) %>

      <h2 class="h2 mb-4">Articoli</h2>
      <p class="mt-1"> Premi sul <span class="text-primary"> <strong>Titolo</strong> </span> per modificare
        l'articolo, premi su <a href="" class="link-muted"><i class="fas fa-eye"></i></a> per andare
        all'articolo lato utente, visibile solo dai giornalisti se non online.</p>
      <div class="js-focus-state input-group input-group-sm mb-4">
        <div class="input-group-prepend">
          <span class="input-group-text">
            <span class="fas fa-search"></span>
          </span>
        </div>
        <input id="datatableSearch" class="form-control " type="email" placeholder="Ricerca Articoli"
          aria-label="Ricerca Articoli">
      </div>
      <!-- End Search -->

      <div class="table-responsive-md u-datatable shadow-lg bg-white">

        <table id="kingPostsTable"
          class="js-datatable table table-bordered table-striped u-datatable__striped u-datatable__content u-datatable__trigger mb-5"
          data-dt-search="#datatableSearch" data-dt-info="#datatableWithPaginationInfo"
          data-dt-entries="#datatableEntries" data-dt-page-length="8" data-dt-is-show-paging="true"
          data-dt-pagination="datatablePagination" data-dt-pagination-classes="pagination mb-0"
          data-dt-pagination-items-classes="page-item" data-dt-pagination-links-classes="page-link"
          data-dt-pagination-next-classes="page-item" data-dt-pagination-next-link-classes="page-link"
          data-dt-pagination-next-link-markup='<span aria-hidden="true">»</span>'
          data-dt-pagination-prev-classes="page-item" data-dt-pagination-prev-link-classes="page-link"
          data-dt-pagination-prev-link-markup='<span aria-hidden="true">«</span>' data-dt-is-responsive>
          <thead>
            <tr class="text-uppercase font-size-1">
              <th scope="col" class="font-weight-medium">
                <div class="d-flex justify-content-between align-items-center">
                  TITOLO
                  <div class="ml-2">
                    <span class="fas fa-angle-up u-datatable__thead-icon"></span>
                    <span class="fas fa-angle-down u-datatable__thead-icon"></span>
                  </div>
                </div>
              </th>
              <th scope="col" class="font-weight-medium">
                <div class="d-flex justify-content-between align-items-center">
                  CATEGORIA
                  <div class="ml-2">
                    <span class="fas fa-angle-up u-datatable__thead-icon"></span>
                    <span class="fas fa-angle-down u-datatable__thead-icon"></span>
                  </div>
                </div>
              </th>
              <th scope="col" class="font-weight-medium">
                <div class="d-flex justify-content-between align-items-center">
                  AUTORE
                  <div class="ml-2">
                    <span class="fas fa-angle-up u-datatable__thead-icon"></span>
                    <span class="fas fa-angle-down u-datatable__thead-icon"></span>
                  </div>
                </div>
              </th>
              <th scope="col" class="font-weight-medium">
                <div class="d-flex justify-content-between align-items-center">
                  DATA
                  <div class="ml-2">
                    <span class="fas fa-angle-up u-datatable__thead-icon"></span>
                    <span class="fas fa-angle-down u-datatable__thead-icon"></span>
                  </div>
                </div>
              </th>
              <th scope="col" class="font-weight-medium">
                <div class="d-flex justify-content-between align-items-center">
                  STATO
                  <div class="ml-2">
                    <span class="fas fa-angle-up u-datatable__thead-icon"></span>
                    <span class="fas fa-angle-down u-datatable__thead-icon"></span>
                  </div>
                </div>
              </th>
            </tr>
          </thead>
          <tbody class="font-size-1">
            <% posts.forEach(post => { %>
            <% if(post.title.length > 30) { %>
            <% post.title = post.title.substring(0, 30) + '...' %>
            <% } %>
            <tr>
              <td class="text-secondary">
                <strong>
                  <a href="/admin/posts/<%= post._id %>"><%= post.title %></a>
                  <span class="opacity-md"> | </span>
                  <a target="_blank" class="link-muted" href="/posts/<%= post._id %>"><i class="fas fa-eye"></i></a>
                </strong>
              </td>
              <td class="text-secondary"><%= post.category %></td>
              <td class="text-secondary"><%= post.author %></td>
              <td class="text-secondary"><%= post.edited.toLocaleDateString() %></td>

              <% if(post.status == 1) { %>
              <td class="text-success"><strong><i class="fas fa-dot-circle"></i>
                  Online</strong></td>
              <% } else if(post.status === 0) { %>

              <td class="text-warning"><strong><i class="fas fa-dot-circle"></i>
                  Pronto</strong></td>
              <% } else { %>

              <td class="text-danger"><strong><i class="fas fa-dot-circle"></i>
                  Bozza</strong></td>
              <% } %>

            </tr>

            <% }) %>
          </tbody>
        </table>

      </div>

      <!-- Pagination -->
      <div class="d-flex justify-content-between align-items-center">
        <nav id="datatablePagination" aria-label="Activity pagination"></nav>

        <small id="datatableInfo" class="text-secondary"></small>
      </div>
      <!-- End Pagination -->

    </div>
  </div>
  </div>
</main>
<%- include ('partials/footer') %>