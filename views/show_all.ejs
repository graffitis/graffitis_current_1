<%- include ('partials/header') %>
<main id="content" role="main">
    <!-- Hero Section -->
    <div class="container space-2">
        <div class="w-md-80 w-lg-75 text-center mx-md-auto">
            <div class="space-bottom-2">
                <h1 class="display-4 font-size-md-down-5 font-weight-semi-bold">
                    Tutti gli Articoli
                    <p class="lead font-weight-normal">
                        Tutto quello che la nostra giovane redazione ha prodotto...
                    </p>
            </div>
        </div>

        <div class="grid mx-n2 justify-content-between" data-masonry='{ "itemSelector": ".grid-item"}'>
            <% posts.forEach((item) => { %>
            <% let test = null; %>
            <% if (item.special) { %>
            <%  test = ' border-bottom-3 border-warning' %>
            <% } %>

            <% if(item.cover || item.cover.length > 2) { %>
            <div class="grid-item col-md-6 col-lg-4 mb-5">
                <article class="card shadow h-100 transition-3d-hover <%= test %>">
                    <img style="height:14em;object-fit: cover;" class="card-img-top" src="<%= item.cover %>"
                        alt="Image Description" />
                    <div class="card-body p-5">
                        <a
                            class="d-inline-block text-muted font-weight-medium text-uppercase small mb-2"><%= item.category %></a>
                        <h2 class="h5 font-weight-medium">
                            <a href="/posts/<%= item._id %>"><%= item.title %></a> <% if (item.special) { %>
                            <a href="/posts/categories/specials"><span class="badge badge-warning text-white ml-1"><i
                                        class="fas fa-star mr-1"></i>Speciale</span></a>
                            <% } %>
                        </h2>
                        <p>
                            <% item.desc = item.desc.slice(0, 60) + "..."; %><%= item.desc %>
                        </p>
                    </div>

                    <div class="card-footer border-0 pt-0 pb-5 px-0 mx-5">
                        <div class="media align-items-center">
                            <% if( item.author.charAt(item.author.length - 1) === 'r' &&  item.author.charAt(item.author.length - 2) === '_' &&  item.author.charAt(item.author.length - 3) === '_') { %>
                            <div class="u-sm-avatar u-sm-avatar--bordered rounded-circle ml-n2" data-toggle="tooltip"
                                data-placement="top" title="Redazione">
                                <img class="img-fluid rounded-circle"
                                    src="https://i.ibb.co/WsQqqXR/graffiti-SOLOGArtboard-1.png"
                                    alt="Image Description" />
                            </div>
                            <% } else { %>
                            <div class="u-sm-avatar u-sm-avatar--bordered rounded-circle ml-n2" data-toggle="tooltip"
                                data-placement="top" title="<%= item.author %>">
                                <img class="img-fluid rounded-circle" src="<%= item.authorPic %>"
                                    alt="Image Description" />
                            </div>
                            <% } %>
                            <div class="media-body d-flex justify-content-end text-muted font-size-1 ml-2">
                                <%= item.edited.toLocaleDateString("it-IT") %>
                            </div>
                        </div>
                    </div>
                </article>
            </div>
            <% } else {  %>
            <div class="grid-item col-md-6 col-lg-4 mb-5">
                <article class="card shadow h-100 transition-3d-hover <%= test %>">

                    <div class="card-body p-5">
                        <a class="d-inline-block text-muted font-weight-medium text-uppercase small mb-2"
                            href="/posts/categories/<%= item.category %>"><%= item.category %></a>
                        <h2 class="h5 font-weight-medium">
                            <a href="/posts/<%= item._id %>"><%= item.title %></a> <% if (item.special) { %>
                            <a href="/posts/categories/specials"><span class="badge badge-warning text-white ml-1"><i
                                        class="fas fa-star mr-1"></i>Speciale</span></a>
                            <% } %>
                        </h2>
                        <p>
                            <% item.desc = item.desc.slice(0, 60) + "..."; %><%= item.desc %>
                        </p>
                    </div>

                    <div class="card-footer border-0 pt-0 pb-5 px-0 mx-5">
                        <div class="media align-items-center">
                            <% if( item.author.charAt(item.author.length - 1) === 'r' &&  item.author.charAt(item.author.length - 2) === '_' &&  item.author.charAt(item.author.length - 3) === '_') { %>
                            <div class="u-sm-avatar u-sm-avatar--bordered rounded-circle ml-n2" data-toggle="tooltip"
                                data-placement="top" title="Redazione">
                                <img class="img-fluid rounded-circle"
                                    src="https://i.ibb.co/WsQqqXR/graffiti-SOLOGArtboard-1.png"
                                    alt="Image Description" />
                            </div>
                            <% } else { %>
                            <div class="u-sm-avatar u-sm-avatar--bordered rounded-circle ml-n2" data-toggle="tooltip"
                                data-placement="top" title="<%= item.author %>">
                                <img class="img-fluid rounded-circle" src="<%= item.authorPic %>"
                                    alt="Image Description" />
                            </div>
                            <% } %>
                            <div class="media-body d-flex justify-content-end text-muted font-size-1 ml-2">
                                <%= item.edited.toLocaleDateString("it-IT") %>
                            </div>
                        </div>
                    </div>
                </article>
            </div>
            <% } %>
            <!-- End Blog Card -->
            <% }) %>
        </div>
    </div>
</main>
<script>
    $('.grid').masonry({
        // options
        itemSelector: '.grid-item',
        columnWidth: 200
    });
</script>
<%- include ('partials/footer') %>